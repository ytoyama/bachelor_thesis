\documentclass[aspectratio=43,unicode,10pt]{beamer}
\usetheme{ttipresentation}

\usepackage{luatexja}
\usepackage{luatexja-fontspec}
\usepackage{graphicx}
\usepackage{multicol}

\setmainjfont{ipagp.otf}
\beamertemplatenavigationsymbolsempty

\newcommand{\itemtitle}[1]{\textbf{#1}\\}
\newcommand{\fire}[1]{\textcolor{red}{\textbf{#1}}}
%\newcommand{\freeze}[1]{\textcolor{blue}{\textbf{#1}}}
\newcommand{\then}{\textcolor{ttiblue}{\textbf{⇒}}\hspace{1ex}}
\newcommand{\good}{\textcolor{orange}{\textbf{◎}}\hspace{1ex}}
\newcommand{\arrow}{\textcolor{ttiblue}{\textbf{→}}\hspace{1ex}}
\newlength{\mycolumnwidth}
\setlength{\mycolumnwidth}{0.495\textwidth}


\title{文書・文間及びカテゴリ間の関係を\\考慮したレーティング予測}
\institute{知能数理研究室}
\author{12056 外山 洋太}
\date{\today}



\begin{document}

\begin{frame}{パラグラフベクトルの目的関数}{}
  \begin{columns}
    \begin{column}{\mycolumnwidth}
      \abovedisplayskip=-0.5em % HACK
      \belowdisplayskip=-0.5em % HACK
      \begin{gather*}
        L = \sum_d L_d \\
        L_d = \frac{1}{T} \sum^{T}_{t = k}
              \log p(w_t | w_{t-k}, ..., w_{t-1}), \\
        p(w_t | w_{t-k}, ..., w_{t-1}) = \frac{e^{y_{w_t}}}{\sum_i e^{y_i}}, \\
        y = b + Uh(w_{t-k}, ..., w_{t-1}, d; W, D)
      \end{gather*}
    \end{column}
    \begin{column}{\mycolumnwidth}
      \footnotesize
      $d$：文書または文 \\
      $w_i$：文書または文中の$i$番目の単語 \\
      $W$：全ての単語の分散表現を表す行列 \\
      $D$：全ての文章の分散表現を表す行列 \\
      $T$：現在の文章に含まれる単語数 \\
      $k$：ウィンドウサイズ \\
      ウィンドウ：ある単語の周辺を表す区間 \\
      $p$：softmax関数により正規化された、
           文脈から現在の単語が導かれることの尤度 \\
      $h$：引数となる単語と文書または文のベクトルを結合した
           ベクトルを返す関数 \\
      %$y$：現在の単語とウィンドウ内の単語及び現在の文章から導出
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}{文ベクトルの重み付け平均の式}{}
  \begin{columns}
    \begin{column}{\mycolumnwidth}
      \begin{gather*}
        \mathbf{t}_{i_{part}} = \sum_{i_{sent}}
                                \frac{w(x_{i_{part}}(i_{sent}))}
                                     {|\sum_{i_{sent}'}
                                      w(x_{i_{part}}(i_{sent}'))|}
                                \mathbf{s}_{i_{sent}}, \\
        x_{i_{part}}(i_{sent}) = \frac{i_{sent}}{\#sent - 1}
                                 - \frac{i_{part}}{\#part - 1}, \\
        w(x) = \begin{cases}
          \frac{1}{2} (\cos(\pi|x|) + 1) & \text{if $|x| \leq 1$} \\
          0 & \text{otherwise}
        \end{cases}
      \end{gather*}
    \end{column}
    \begin{column}{\mycolumnwidth}
      \footnotesize
      $\mathbf{s}_{i_{sent}}$：レビュー内の文ベクトル \\
      $\mathbf{t}_{i_{part}}$：重み付け平均された文ベクトル \\
      $i_{sent}$：レビュー内の文ベクトルのインデックス \\
      $i_{part}$：重み付け平均された文ベクトルのインデックス \\
      $\#sent$：レビュー内の文ベクトルの数 \\
      $\#part$：重み付け平均された文ベクトルの数
    \end{column}
  \end{columns}
\end{frame}

\end{document}
